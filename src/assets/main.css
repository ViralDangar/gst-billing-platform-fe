@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
  }
  
  body {
    @apply bg-gray-50 text-gray-800;
    font-family: 'IBM Plex Sans', system-ui, sans-serif;
  }

  ::selection {
    @apply bg-primary-100 text-primary-900;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-gray-100;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400;
  }
}

@layer components {
  /* Card styles */
  .card {
    @apply bg-white border border-gray-200 rounded-lg shadow-card;
  }

  .card-header {
    @apply px-5 py-4 border-b border-gray-100;
  }

  .card-body {
    @apply p-5;
  }

  /* Button variants */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium rounded-md transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply btn bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500 active:bg-primary-800;
  }

  .btn-secondary {
    @apply btn bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-primary-500 active:bg-gray-100;
  }

  .btn-success {
    @apply btn bg-success-600 text-white hover:bg-success-700 focus:ring-success-500;
  }

  .btn-danger {
    @apply btn bg-danger-500 text-white hover:bg-danger-600 focus:ring-danger-500;
  }

  .btn-ghost {
    @apply btn text-gray-600 hover:bg-gray-100 hover:text-gray-800;
  }

  .btn-sm {
    @apply px-3 py-1.5 text-xs;
  }

  .btn-lg {
    @apply px-6 py-3 text-base;
  }

  /* Form inputs */
  .form-label {
    @apply block text-sm font-medium text-gray-700 mb-1.5;
  }

  .form-input {
    @apply w-full px-3.5 py-2.5 text-sm border border-gray-300 rounded-md bg-white placeholder-gray-400 transition-colors duration-150;
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500;
    @apply disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed;
  }

  .form-input-error {
    @apply border-danger-500 focus:ring-danger-500 focus:border-danger-500;
  }

  .form-select {
    @apply form-input pr-10 appearance-none bg-no-repeat bg-right;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-size: 1.5em 1.5em;
  }

  .form-error {
    @apply mt-1.5 text-xs text-danger-600;
  }

  .form-hint {
    @apply mt-1.5 text-xs text-gray-500;
  }

  /* Table styles */
  .data-table {
    @apply w-full text-sm;
  }

  .data-table thead {
    @apply bg-gray-50 border-b border-gray-200;
  }

  .data-table th {
    @apply px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider;
  }

  .data-table td {
    @apply px-4 py-3.5 text-gray-700 border-b border-gray-100;
  }

  .data-table tbody tr:hover {
    @apply bg-gray-50/50;
  }

  .data-table tbody tr:last-child td {
    @apply border-b-0;
  }

  /* Status badges */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-draft {
    @apply bg-warning-100 text-warning-700 border border-warning-300;
  }

  .badge-final {
    @apply bg-success-100 text-success-700 border border-success-300;
  }

  .badge-active {
    @apply bg-success-100 text-success-700 border border-success-300;
  }

  .badge-inactive {
    @apply bg-gray-100 text-gray-600 border border-gray-300;
  }

  .badge-b2b {
    @apply bg-primary-100 text-primary-700 border border-primary-300;
  }

  .badge-b2c {
    @apply bg-accent-100 text-accent-700 border border-accent-300;
  }

  /* Modal styles */
  .modal-overlay {
    @apply fixed inset-0 bg-gray-900/50 backdrop-blur-sm z-50 flex items-center justify-center p-4;
  }

  .modal-content {
    @apply bg-white rounded-lg shadow-elevated w-full max-h-[90vh] overflow-hidden;
  }

  .modal-header {
    @apply px-6 py-4 border-b border-gray-100 flex items-center justify-between;
  }

  .modal-body {
    @apply px-6 py-5 overflow-y-auto;
  }

  .modal-footer {
    @apply px-6 py-4 border-t border-gray-100 flex items-center justify-end gap-3;
  }

  /* Page header */
  .page-header {
    @apply mb-6 flex items-center justify-between;
  }

  .page-title {
    @apply text-xl font-semibold text-gray-900;
  }

  .page-subtitle {
    @apply text-sm text-gray-500 mt-1;
  }

  /* Empty state */
  .empty-state {
    @apply text-center py-12;
  }

  .empty-state-icon {
    @apply mx-auto h-12 w-12 text-gray-300;
  }

  .empty-state-title {
    @apply mt-4 text-sm font-medium text-gray-900;
  }

  .empty-state-text {
    @apply mt-1 text-sm text-gray-500;
  }

  /* Currency formatting */
  .currency {
    @apply font-mono tabular-nums;
  }

  /* Invoice preview specific */
  .invoice-preview {
    @apply bg-white border border-gray-200 shadow-soft max-w-4xl mx-auto;
  }

  .invoice-header {
    @apply border-b-2 border-gray-800 pb-4 mb-4;
  }

  .invoice-section {
    @apply mb-6;
  }

  .invoice-table {
    @apply w-full border-collapse;
  }

  .invoice-table th,
  .invoice-table td {
    @apply border border-gray-300 px-3 py-2 text-sm;
  }

  .invoice-table th {
    @apply bg-gray-100 font-semibold text-gray-700;
  }

  /* Sidebar navigation */
  .nav-item {
    @apply flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-md transition-colors duration-150;
  }

  .nav-item-active {
    @apply bg-primary-50 text-primary-700 border-r-2 border-primary-600;
  }

  .nav-item-inactive {
    @apply text-gray-600 hover:bg-gray-100 hover:text-gray-800;
  }

  /* Loading spinner */
  .spinner {
    @apply animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full;
  }

  /* Toast notifications */
  .toast {
    @apply fixed bottom-4 right-4 z-50 flex items-center gap-3 px-4 py-3 rounded-lg shadow-elevated text-sm font-medium;
  }

  .toast-success {
    @apply bg-success-600 text-white;
  }

  .toast-error {
    @apply bg-danger-500 text-white;
  }

  .toast-warning {
    @apply bg-warning-500 text-white;
  }

  .toast-info {
    @apply bg-primary-600 text-white;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Animated transitions */
  .fade-enter-active,
  .fade-leave-active {
    transition: opacity 0.15s ease;
  }

  .fade-enter-from,
  .fade-leave-to {
    opacity: 0;
  }

  .slide-enter-active,
  .slide-leave-active {
    transition: transform 0.2s ease, opacity 0.2s ease;
  }

  .slide-enter-from,
  .slide-leave-to {
    transform: translateY(-10px);
    opacity: 0;
  }

  /* Print styles */
  @media print {
    @page {
      size: A4;
      margin: 10mm;
    }

    body {
      print-color-adjust: exact;
      -webkit-print-color-adjust: exact;
    }

    .no-print {
      display: none !important;
    }

    .print-break-before {
      break-before: page;
    }

    .print-break-after {
      break-after: page;
    }

    .invoice-preview {
      @apply border-0 shadow-none max-w-full;
      padding: 0 !important;
    }

    .invoice-table {
      page-break-inside: avoid;
    }

    .invoice-table th,
    .invoice-table td {
      @apply border border-black;
    }

    .invoice-header {
      @apply border-b-2 border-black;
    }
  }

  /* Page transitions */
  .page-enter-active,
  .page-leave-active {
    transition: all 0.3s ease;
  }

  .page-enter-from {
    opacity: 0;
    transform: translateY(20px);
  }

  .page-leave-to {
    opacity: 0;
    transform: translateY(-20px);
  }

  /* Card hover effects */
  .card {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .card:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
  }

  /* Button ripple effect */
  .btn {
    position: relative;
    overflow: hidden;
  }

  .btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.5);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
  }

  .btn:active::before {
    width: 300px;
    height: 300px;
  }

  /* Loading skeleton */
  @keyframes shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  .skeleton {
    animation: shimmer 2s infinite;
    background: linear-gradient(
      to right,
      #f6f7f8 0%,
      #edeef1 20%,
      #f6f7f8 40%,
      #f6f7f8 100%
    );
    background-size: 1000px 100%;
  }

  /* Smooth scroll */
  html {
    scroll-behavior: smooth;
  }

  /* Mobile responsive utilities */
  @media (max-width: 768px) {
    .hide-mobile {
      display: none !important;
    }

    .card-body {
      padding: 1rem !important;
    }

    .data-table th,
    .data-table td {
      padding: 0.75rem !important;
      font-size: 0.875rem !important;
    }

    /* Make tables horizontally scrollable */
    .table-container {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }

    /* Stack form grids on mobile */
    .form-grid {
      grid-template-columns: 1fr !important;
    }
  }
}